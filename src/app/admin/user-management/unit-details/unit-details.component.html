

<div class="wrapper">
    <div class="container">
      <div class="rowone">
        <div class="row">
          <div class="col-md-6">
  
            <span (click)="goBack()" class="circle">
              <span><i class="fa fa-angle-left mappp" aria-hidden="true"></i></span>
            </span>
  
            <div class="text-pro">
              <p class=" pro-paragraph"> {{unitInfo?.name}} </p>
            </div>
  
          </div>
          <div class="col-md-6 text-right">
            <span class="btnmrg"><button type="button" *ngIf="unitInfo?.status === 'forrent'" data-toggle="modal"
                data-target="#myModal" class="btn btn-primary prisize">Mark as Rented</button></span>
                <span class="btnmrg"><button (click)="viewRentDetail(unitInfo.rentDocumentId)" type="button" *ngIf="unitInfo?.status === 'rented'" data-toggle="modal"
                  data-target="#myModal2" class="btn btn-primary prisize">View Rent Agreement</button></span>
  
            <span class="btnmrg"><button type="button" [ladda]="btnLoader" (click)="updateUnits(unitForm.value, unitForm.valid)"
                class="btn btn-primary prisize">Save Changes</button></span>
  
          </div>
        </div>
      </div>
  
      <div class="picrow">
  
        <div class="row">
  
          <div class="col-md-6">
            <div class="formrowcol">
              <div class="row">
                <div class="col-md-6">
                  <div class="one">
                    <span class="bd">General Information</span>
                  </div>
                  <div class="second">
                    <span> Important details of the units. </span>
                  </div>
                </div>
                <div class="col-md-3">
                  <span style="text-align: right; font-weight: bold;"> Status :</span>
                </div>
                <div class="col-md-3">
                  <span style="text-align: center;">{{unitInfo?.status}}</span>
                </div>
              </div>
  
            </div>
            <div class="formdivthree">
              <form [formGroup]="unitForm" class="adjus" action="">
  
                <div class="row formpad">
                  <div class="col-md-6">
                    <label for="">
                      Floor
                    </label>
                    <div class="form-group">
                        <p class="error-message-dt"
                        *ngIf="unitForm.controls['floor'].touched && unitForm.controls['floor'].errors?.required">
                        Floor Required</p>
                      <select class="custom-select red" formControlName="floor" id="inputGroupSelect01">
                        <option *ngFor="let floornumber of unitsfloor" selected value="{{floornumber}}">{{floornumber}}
                        </option>
  
                      </select>
  
                    </div>
  
                  </div>
                  <div class="col-md-6">
                    <label for="">
                      Unit Name
                    </label>
                    <div class="form-group">
                        <p class="error-message-dt"
                    *ngIf="unitForm.controls['name'].touched && unitForm.controls['name'].errors?.required">
                    Floor Name Required</p>
                      <input type="text" formControlName="name" class="form-control" placeholder="Unit Name">
                    </div>
                  </div>
    
                  <div class="col-md-12">
                    <div class="form-group">
                   
                        <!-- <ng-multiselect-dropdown [data]="arrayAttributes"  formControlName="attributes" 
                      
                        [settings]="dropdownSettings" 
                        [placeholder]="'Select Attribute'"
                        (onSelect)="onItemSelect($event)" 
                        (onDeSelect)="OnItemDeSelect($event)"
                        (onSelectAll)="onSelectAll($event)"
                        (onDeSelectAll)="onDeSelectAll($event)">
                                     
                      </ng-multiselect-dropdown>  -->
                     
                      <!-- <select class="form-control">
                        <option value=""> Payment Type</option>
                        <option *ngFor="let data of attributeList" value="{{data?.id}}"> {{data?.status}}</option>
                     
                      </select> -->
                    </div>
                  </div>
  
  
                </div>
              </form>
            </div>
  
          </div>
          <div class="col-md-6" *ngIf="!unitInfo?.planId">
            <div class="formrowcol">
              <div class="one">
                <span class="bd">Booking Information</span>
              </div>
              <div class="second">
                <span> Contact details of occupant. </span>
              </div>
            </div>
            <div class="formdivthree">
              <div class="adjst" style="padding-top: 50px;">
                <div class="row h-100 justify-content-center align-items-center">
                  <div class="picss">
                    <i class="fa fa-user userss" aria-hidden="true"></i>
                  </div>
  
                </div>
                <div class="d-flex justify-content-center">
                  <p>The Unit is not booked Yet</p>
  
                </div>
              </div>
  
  
  
  
  
            </div>
  
          </div>
          <div class="col-md-6" *ngIf="unitInfo?.planId">
            <div class="formrowcol">
              <div class="one">
                <span class="bd">Booking Information</span>
              </div>
              <div class="second">
                <span> Contact details of occupant. </span>
              </div>
            </div>
            <div class="formdivthree">
              <div class="row formpad">
                <div class="col-md-8">
                  <!-- <span class="gre">Booked By :</span><span class="bld"> Kevin Lawson</span><br>
                  <span class="gre">Phone No :</span><span class="bld"> Kevin Lawson</span><br>
                  <span class="gre">Occupation :</span><span class="bld"> Kevin Lawson</span><br>
                  <span class="gre">Address :</span><span class="bld"> Kevin Lawson</span><br> -->
                  <div class="divmain">
                    <div class="onediv">
                      <label class="move">
                        Booked By :
                      </label>
                    </div>
                    <div class="seconddiv">
                      <label for="">
                        {{unitInfo?.userName}}
                      </label>
                    </div>
                  </div>
                  <div class="divmain">
                    <div class="onediv">
                      <label class="move">
                        Phone No :
                      </label>
                    </div>
                    <div class="seconddiv">
                      <label for="">
                        {{unitInfo?.phNumber}}
                      </label>
                    </div>
                  </div>
                  <div class="divmain">
                    <div class="onediv">
                      <label class="move">
                        Occupation :
                      </label>
                    </div>
                    <div class="seconddiv">
                      <label for="">
                        {{unitInfo?.occupation}}
                      </label>
                    </div>
                  </div>
                  <div class="divmain">
                    <div class="onediv">
                      <label class="move">
                        Address :
                      </label>
                    </div>
                    <div class="seconddiv">
                      <label for="">
                        {{unitInfo?.address}}
                      </label>
                    </div>
                  </div>
  
  
                </div>
                <div class="col-md-4">
                  <div class="d-flex justify-content-center">
                    <div class="picss2">
                      <img style="width: 100px; height: 100px; border-radius:50%;" [src]='unitInfo.imageUrl'>
                      <!-- <i class="fa fa-user userss" aria-hidden="true"></i> -->
                      <img src="">
                    </div>
                  </div>
  
  
  
                </div>
  
  
              </div>
  
  
  
  
            </div>
  
          </div>
  
  
  
        </div>
  
          <!-- pageLoader -->
          <div *ngIf=pageLoader class="spinner">
              <div class="double-bounce1"></div>
              <div class="double-bounce2"></div>
            </div>
  
        <!-- wrapper 2 -->
  
        <div class="second2">
          <div class="container-fluid">
            <div class="row">
              <div class=" col-md-12">
                <ul class="nav nav-tabs">
                  <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#home">Plan</a>
                  </li>
                  <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#menu2">Payment</a></li>
                </ul>
  
                <div class="tab-content">
  
                  <!-- Permit -->
                  <div id="home" class="tab-pane fade show active">
  
                    <div class="rowtab">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="formrowcol">
                            <div class="one">
                              <span class="bd">Payments</span>
                            </div>
                            <div class="second">
                              <span> Keep track of the payment recordof the unit </span>
                            </div>
                          </div>
                        </div>
  
                        <div class="col-md-12">
                          <div class="table-responsive">
                            <table class="table">
                              <thead>
  
                              </thead>
                              <tbody>
                                <tr *ngFor="let data of installmentList" [ngClass]="data.highlightDate ? 'datecolor':''">
                                  <td>
                                    <div class="media">
                                      <div class="media-left leftss">
                                        <div class="d-flex justify-content-center">
                                          <span class="left-sp">{{data?.installmentNumber}}</span>
  
                                        </div>
                                      </div>
                                      <div class="media-body">
                                        <div class="heads">
                                          <span>{{data?.name}}</span>
                                        </div>
                                        <div class="details">
                                          <span>{{data?.description}}</span>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                  <td>
                                      <div class="botm">
                                        <span>{{data?.dueDate | date :'dd/MM/yyyy'}}</span>
                                      </div>
    
                                    </td>
                                  <td>
                                    <div class="botm">
                                      <span>Rs. {{data?.amount}} * {{data?.occurrence}}</span>
                                    </div>
  
                                  </td>
                                  <td>
                                    <div class="botm">
                                      <span>Rs. {{+data?.amount * +data?.occurrence}}</span>
                                    </div>
  
                                  </td>
                                  <!-- <td>
                                <div class="botm">
                                  <span>PAID</span>
                                </div>
          
                              </td>
                              <td>
                                <div class="details">
                                  <span>Paid On</span>
                                </div>
                                <div class="heads">
                                  <span>2 January, 2018</span>
                                </div>
                              </td> -->
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
  
                        <div class="col-md-12">
                          <div class="formrowcol4">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="justify-content-center align-self-center">
                                  <span class="bd">Payment Plan Amount</span>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="d-flex justify-content-center">
                                  <span class="bd"> Rs. {{allPlans[0]?.totalPrice}}</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
  
                  </div>
  
                  <!-- Checkout Memo -->
                  <div id="menu2" class="tab-pane fade">
  
                    <div class="rowtab">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="formrowcol13">
                            <div class="formrowcol12">
                              <div class="one">
                                <span class="bd">Payments</span>
                              </div>
                              <div class="second">
                                <span> Keep track of the payment record of the unit </span>
                              </div>
                            </div>
                            <div class="formrowcol11">
                              <div class="one">
                                <span class="bd">Amount Paid: Rs. {{unitInfo?.amount}}</span>
                              </div>
                              <div class="second">
                                <span *ngIf="(+allPlans[0]?.totalPrice - +unitInfo?.amount) >0"> Amount to be paid: Rs.
                                  {{+allPlans[0]?.totalPrice - +unitInfo?.amount}} </span>
                                <span *ngIf="(+allPlans[0]?.totalPrice - +unitInfo?.amount) <= 0"> Amount to be paid: Rs.
                                  0 </span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="table-responsive">
                            <table class="table">
                              <thead>
                                <tr>
                                  <th scope="col">Date</th>
                                  <th scope="col">Amount</th>
                                  <th scope="col">Status</th>
                                  <th scope="col">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let data of unitPaymentList">
                                  <td>
                                    <div class="media">
                                      <!-- <div class="media-left leftss">
                                    <div class="d-flex justify-content-center">
                                        <span class="left-sp">{{data?.installmentNumber}}</span>
            
                                    </div>
                                  </div> -->
                                      <div class="media-body">
  
                                        <div class="details2">
                                          <span>{{data?.date | date :'dd/MM/yyyy'}}</span>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="botm">
                                      <span>{{data?.amount}}</span>
                                    </div>
  
                                  </td>
                                  <td>
                                    <div class="botm">
                                      <span>{{data?.status}}</span>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="botm">
                                      <span class="btnsty"><button type="button" (click)="viewDetails(data)"
                                          data-toggle="modal" data-target="#myModal4" class="btn stybtn">View
                                          Details</button></span>
                                    </div>
                                  </td>
                                  <td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
  
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
  
          </div>
         
        </div>
  
      </div>
  
    </div>
  
  </div>
  
  
  <!-- Modal 2 -->
  <div class="modal" id="myModal2">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
  
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Upload Rent Agreement</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
  
        <!-- Modal body -->
        <div class="modal-body">
          <form [formGroup]="uploadForm">
            <div class="row">
              <div class="col-md-12 d-flex flex-column align-items-center justify-content-center">
  
                <!-- <input accept="image/gif,image/jpeg,image/png,image/bmp" formControlName="url" class="upload ember-view"
                  type="file" (change)="onUploadFile($event)">  -->
  
  
                 
              </div>
              <div class="col-md-12 d-flex flex-column align-items-center justify-content-center" *ngFor="let data of imageUrl2">
                <img style="height: 400px; width:400px;" [src]='data'>
              </div>
              
            </div>
          </form>
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
  
          <button type="button" id="closeUpload" class="btn btn-default defsize" data-dismiss="modal">Cancel</button>
          <button type="button" [ladda]="btnLoader2" (click)="saveData(uploadForm.value)"
            class="btn btn-primary prisize">Save</button>
        </div>
  
      </div>
    </div>
  </div>
  
  
  <!-- Modal 4 -->
  <div class="modal" id="myModal4">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
  
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Payment Details</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
  
        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-6">
              <div>
                <h5>Amount Paid:</h5>
                <p>{{detailPayment?.amount}}</p>
              </div>
              <div>
                <h5>Unit #:</h5>
                <p>{{detailPayment?.unit?.name}}</p>
              </div>
              <div>
                <h5> Description:</h5>
                <p>{{detailPayment?.description}}</p>
              </div>
  
            </div>
            <div class="col-md-6">
              <div>
                <h5>Date:</h5>
                <p>{{detailPayment?.date}}</p>
              </div>
              <div>
                <h5>Customer Name:</h5>
                <p>{{detailPayment?.customer?.username}}</p>
              </div>
              <div>
                <h5> Status:</h5>
                <p>{{detailPayment?.status}}</p>
              </div>
  
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 borsyl" *ngFor="let data of imageUrl">
              <img style="height: 240px; width:240px; border-radius: 0;border: 4px solid #dddddd;" [src]='data'>
            </div>
          </div>
  
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
  
  
  
        </div>
  
      </div>
    </div>
  </div>
  
  <!-- Modal  -->
  <div class="modal" id="myModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
  
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Upload Rent Agreement</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
  
        <!-- Modal body -->
        <div class="modal-body">
          <form [formGroup]="uploadForm">
            <div class="row">
              <div class="col-md-12 d-flex flex-column align-items-center justify-content-center">
  
                <input accept="image/gif,image/jpeg,image/png,image/bmp" formControlName="url" class="upload ember-view"
                  type="file" (change)="onUploadFile($event)">
  
  
  
              </div>
            </div>
          </form>
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
  
          <button type="button" id="closeUpload" class="btn btn-default defsize" data-dismiss="modal">Cancel</button>
          <button type="button" [ladda]="btnLoader2" (click)="saveData(uploadForm.value)"
            class="btn btn-primary prisize">Save</button>
        </div>
  
      </div>
    </div>
  </div>
  
  